<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PWA Test - Delivery Tracker</title>
    <link rel="manifest" href="/manifest.webmanifest">
    <meta name="theme-color" content="#2563eb">
</head>
<body>
    <h1>üîß PWA Test Page</h1>
    <p>This page tests if your PWA is properly configured.</p>

    <h2>‚úÖ PWA Requirements Check:</h2>
    <ul>
        <li>HTTPS: <span id="https-check">‚è≥</span></li>
        <li>Manifest: <span id="manifest-check">‚è≥</span></li>
        <li>Service Worker: <span id="sw-check">‚è≥</span></li>
        <li>Install Button: <span id="install-check">‚è≥</span></li>
    </ul>

    <h2>üåê Test Your Vercel App:</h2>
    <p>Replace YOUR_USERNAME in the URLs below:</p>
    <ul>
        <li><a href="https://YOUR_USERNAME.vercel.app" target="_blank">Your Vercel App</a></li>
        <li><a href="https://YOUR_USERNAME.vercel.app/manifest.webmanifest" target="_blank">Manifest File</a></li>
    </ul>

    <h2>üì± Brave PWA Install Test:</h2>
    <button id="install-btn">Install PWA</button>
    <p id="install-status"></p>

    <script>
        // Check HTTPS
        document.getElementById('https-check').textContent =
            location.protocol === 'https:' ? '‚úÖ' : '‚ùå';

        // Check Manifest
        fetch('/manifest.webmanifest')
            .then(response => {
                document.getElementById('manifest-check').textContent =
                    response.ok ? '‚úÖ' : '‚ùå';
            })
            .catch(() => {
                document.getElementById('manifest-check').textContent = '‚ùå';
            });

        // Check Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then(() => {
                    document.getElementById('sw-check').textContent = '‚úÖ';
                })
                .catch(() => {
                    document.getElementById('sw-check').textContent = '‚ùå';
                });
        } else {
            document.getElementById('sw-check').textContent = '‚ùå';
        }

        // PWA Install
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('install-check').textContent = '‚úÖ';
            document.getElementById('install-btn').style.display = 'block';
        });

        document.getElementById('install-btn').addEventListener('click', () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    document.getElementById('install-status').textContent =
                        choiceResult.outcome === 'accepted' ? '‚úÖ Installed!' : '‚ùå Cancelled';
                    deferredPrompt = null;
                });
            }
        });
    </script>

    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        a { color: #2563eb; }
        button { background: #2563eb; color: white; border: none; padding: 10px 20px; margin: 10px 0; cursor: pointer; }
        ul { list-style-type: none; padding: 0; }
        li { margin: 10px 0; }
    </style>
</body>
</html>
